<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title></title>
    <link rel="shortcut icon" href="../../../images/favicon.ico" />
    <link rel="stylesheet" href="../../../css/ipt/main_pc.css" />
    <link rel="stylesheet" href="../../../css/ipt/style.css" />
    <style>
        .assemblyIns tr:nth-child(1) td {
            height: 50px;
            font-size: 32px!important;
        }
        .evun_table table td {
            font-size: 20px!important;
        }
    </style>
    <script type="text/javascript" src="../../../js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../js/angular.min.js"></script>
</head>

<body class="application bg_e9f3fc" ng-app="pmcApp">
<script type="text/javascript">
    $(function() {
        var h = window.screen.height;
        h = h - 75 - 45 - 40;
        $(".mid").height(h);
    });
</script>
<div class="wrapper" ng-controller="bodyCtrl">
    <div class="navbar bg_035D9E">
        <div class="headleft">
            <img src="../../../images/ipt/header_logo.png" />
        </div>
        <div class="headmid">
            <span ng-bind="element.title">装配指导</span>
        </div>
        <div class="headright">
            <span><a href="javascript:void(0)" style="color: white" id="a" onclick="goto()" target="_Blank">{{element.title}}报表</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span>30s</span><br/>
            <span>{{element.datetime}}</span>
        </div>
    </div>
    <div class="mid">
        <div class="evun_h_100 evun_12 evun_table">
            <table class="assemblyIns evun_table_theme">
                <tr  class="evun-table-th b">
                    <td>序号</td>
                    <td>工位</td>
                    <td>VIN</td>
                    <td>管理号</td>
                    <td>车型</td>
                    <td>配置</td>
                    <td>物料描述</td>s
                </tr>
                <tr ng-repeat="item in element">
                    <td>{{item.rn}}</td>
                    <td>{{item.stcode}}</td>
                    <td>{{item.vin}}</td>
                    <td>{{item.pidId}}</td>
                    <td>{{item.chex}}</td>
                    <td>{{item.controlModel}}</td>
                    <td>{{item.descr}}</td>
                </tr>
                <!--<tr>-->
                    <!--<td id="rn_0"></td>-->
                    <!--<td id="work_0"></td>-->
                    <!--<td id="ver_0"></td>-->
                    <!--<td id="manage_0"></td>-->
                    <!--<td id="carV_0"></td>-->
                    <!--<td id="confing_0"></td>-->
                    <!--<td id="descr_0"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_1"></td>-->
                    <!--<td id="work_1"></td>-->
                    <!--<td id="ver_1"></td>-->
                    <!--<td id="manage_1"></td>-->
                    <!--<td id="carV_1"></td>-->
                    <!--<td id="confing_1"></td>-->
                    <!--<td id="descr_1"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_2"></td>-->
                    <!--<td id="work_2"></td>-->
                    <!--<td id="ver_2"></td>-->
                    <!--<td id="manage_2"></td>-->
                    <!--<td id="carV_2"></td>-->
                    <!--<td id="confing_2"></td>-->
                    <!--<td id="descr_2"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_3"></td>-->
                    <!--<td id="work_3"></td>-->
                    <!--<td id="ver_3"></td>-->
                    <!--<td id="manage_3"></td>-->
                    <!--<td id="carV_3"></td>-->
                    <!--<td id="confing_3"></td>-->
                    <!--<td id="descr_3"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_4"></td>-->
                    <!--<td id="work_4"></td>-->
                    <!--<td id="ver_4"></td>-->
                    <!--<td id="manage_4"></td>-->
                    <!--<td id="carV_4"></td>-->
                    <!--<td id="confing_4"></td>-->
                    <!--<td id="descr_4"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_5"></td>-->
                    <!--<td id="work_5"></td>-->
                    <!--<td id="ver_5"></td>-->
                    <!--<td id="manage_5"></td>-->
                    <!--<td id="carV_5"></td>-->
                    <!--<td id="confing_5"></td>-->
                    <!--<td id="descr_5"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_6"></td>-->
                    <!--<td id="work_6"></td>-->
                    <!--<td id="ver_6"></td>-->
                    <!--<td id="manage_6"></td>-->
                    <!--<td id="carV_6"></td>-->
                    <!--<td id="confing_6"></td>-->
                    <!--<td id="descr_6"></td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="rn_7"></td>-->
                    <!--<td id="work_7"></td>-->
                    <!--<td id="ver_7"></td>-->
                    <!--<td id="manage_7"></td>-->
                    <!--<td id="carV_7"></td>-->
                    <!--<td id="confing_7"></td>-->
                    <!--<td id="descr_7"></td>-->
                <!--</tr>-->
            </table>
        </div>

    </div>
    <div class="foot bg_035D9E">
        <div class="f1">
            <marquee><span>{{element.message}}</span></marquee>
        </div>
        <div class="f2"><img src="../../../images/ipt/footer.png" /> </div>
    </div>
</div>
</body>
<script>
    var timer=0;
    var key = window.location.pathname;
    key = key.substring(key.lastIndexOf("\/")+1);
    var app = angular.module('pmcApp', []);
    app.controller('bodyCtrl', function($scope, $http, $interval,$timeout) {
        var updateData = function() {
            $http.get("../assemblyInstructionInfo.json/"+key)
                .success(function(data) {
                    clearInterval(timer);
                    $scope.element=data;
                    $("title").html($scope.element.title)
                    if ($scope.element.title === "轮胎总装") {
                        $(".assemblyIns").addClass("hideSeven");
                    }
//                        initData($scope.element);
                });
            $timeout(updateData, 1000*30);
        };
        updateData();
    });

//    var sign_l = 0;
//    function initData(element){
//
//        // 页数
//        var page = ceil(element.assemble.length, 8);
//
//        //
//        var updateTable = function() {
//
//            clearTable();
//            initTable('work_','ver_', 'manage_', 'carV_','confing_','descr_','rn_', sign_l, element.assemble);
//
//            sign_l = (++sign_l)%page;
//
//        };
//        updateTable();
//        setTimeout(function(){
//            timer = setInterval(updateTable,1000*20);
//        },1000*2);
//    }
//
//    function initTable(td0,td1,td2,td3,td4,td5,td6,sign,data){
//        for(var i=sign*8; i<data.length; i++){
//            $("#"+td0+(i-sign*8)).html(data[i].stcode);
//            $("#"+td1+(i-sign*8)).html(data[i].vin);
//            $("#"+td2+(i-sign*8)).html(data[i].pidId);
//            $("#"+td3+(i-sign*8)).html(data[i].chex);
//            $("#"+td4+(i-sign*8)).html(data[i].controlModel);
//            $("#"+td5+(i-sign*8)).html(data[i].descr);
//            $("#"+td6+(i-sign*8)).html(data[i].rn);
//        }
//    }
//
//    // 取值
//    function ceil(len, mod){
//        return Math.ceil(len/mod);
//    }
//
//    function clearTable(){
//        for(var i=0;i<8;i++){
//            $("#work_"+i).html('');
//            $("#ver_"+i).html('');
//            $("#manage_"+i).html('');
//            $("#carV_"+i).html('');
//            $("#confing_"+i).html('');
//            $("#descr_"+i).html('');
//            $("#rn"+i).html('');
//        }
//    }

    function goto(){
        document.getElementById("a").href ="http://10.80.1.12:7005/WebReport/ReportServer?reportlet=/PP/assemblyInstructionInfo.cpt&stcode="+key;
    }

</script>

</html>